## 飞行大战（pygame）

一个使用 `pygame` 编写的纵版射击小游戏，支持英雄飞机移动/射击、多敌机波次刷新、生命值与得分系统、子弹碰撞判定、爆炸动画和素材集中管理。项目遵循 PEP 20 “The Zen of Python” 所倡导的清晰、模块化设计，核心逻辑拆分在 `game/` 包中，便于维护与扩展。

### 功能概览
- **英雄飞机**：左右移动、发射子弹，拥有5点生命值，被击中后扣血1点，生命值归零后播放爆炸动画并结束游戏。击毁敌机可获得分数。
- **多敌机系统**：支持三种敌机类型（小型、中型、大型），不同类型敌机具有不同的速度、生命值和分值。敌机按固定间隔刷新，最多同时出现5架。
- **生命值与得分**：英雄飞机拥有5点初始生命值，击毁不同类型敌机获得不同分数（小型100分、中型300分、大型500分）。屏幕实时显示当前生命值和得分。
- **资源管理**：`GameAssets` 集中加载图片素材，包括三种敌机的不同图像，减少重复 IO。
- **输入系统**：同时支持离散按键事件和持续按键状态，确保操作顺畅，并使用 delta time 驱动移动，保证帧率稳定。
- **碰撞系统**：英雄与敌机/子弹之间的碰撞采用 `pygame.Rect` 检测，支持敌机生命值扣减和英雄生命值扣减。

### 环境要求
- Python 3.10+
- `pygame` >= 2.5

### 安装与运行
```bash
python -m venv .venv
source .venv/bin/activate          # Windows 使用 .venv\Scripts\activate
pip install pygame

python app.py
```

### 项目结构
```
airplane-game-master/
├── app.py                 # 入口：初始化、主循环、多敌机刷新
├── game/
│   ├── __init__.py
│   ├── assets.py          # 素材加载（包括三种敌机图像）
│   ├── constants.py       # 全局常量（生命值、得分、敌机配置等）
│   ├── hero.py            # 英雄飞机（生命值、得分、UI显示）
│   ├── enemy.py           # 敌机逻辑（三种类型、生命值、移动）
│   ├── bullet.py          # 子弹实体
│   ├── collision.py       # 碰撞处理（生命值扣减、得分）
│   └── input_handler.py   # 键盘监听（支持 delta time）
└── feiji/                 # 游戏素材（三种敌机图像等）
```

### 操作说明
- `← / A`：向左移动
- `→ / D`：向右移动
- `Space`：发射子弹

### 游戏特色
- **三种敌机类型**：小型敌机（速度快、生命值低、分值低）、中型敌机（速度中等、生命值中等、分值中等）、大型敌机（速度慢、生命值高、分值高）。
- **生命值系统**：英雄飞机拥有5点生命值，被敌机子弹击中后扣减1点生命值，生命值归零后游戏结束。
- **得分系统**：击毁不同类型敌机获得不同分数，屏幕实时显示当前得分。
- **多敌机波次**：敌机按固定间隔刷新，最多同时出现5架，保持游戏的挑战性和可玩性。
- **帧率稳定**：使用 delta time 驱动所有移动，保证游戏在不同设备上都能以稳定的60 FPS运行。

### 测试用例
1. **英雄飞机移动**：按下 A/← 或 D/→ 键，英雄飞机应平滑移动，且不会超出屏幕边界。
2. **子弹发射**：按下空格键，英雄飞机应发射子弹，子弹向上飞行，超出屏幕后自动消失。
3. **敌机刷新**：游戏开始后，敌机应按固定间隔从屏幕上方刷新，最多同时出现5架。
4. **生命值扣减**：英雄飞机被敌机子弹击中后，生命值应扣减1点，屏幕上的生命值显示应相应更新。
5. **得分增加**：击毁敌机后，得分应相应增加，屏幕上的得分显示应相应更新。
6. **游戏结束**：英雄飞机生命值归零后，应播放爆炸动画并结束游戏。

### 未来迭代建议
- 加入道具系统（如护盾、双倍射击、炸弹等），提升游戏的策略性和趣味性。
- 支持多关卡系统，每关增加难度和挑战性。
- 加入音效和背景音乐，提升游戏的沉浸感。
- 实现暂停菜单和游戏重新开始功能。
- 提供打包脚本（如 `pyinstaller`）方便发布。

欢迎基于当前模块化结构继续扩展玩法，如需帮助请随时提出！

